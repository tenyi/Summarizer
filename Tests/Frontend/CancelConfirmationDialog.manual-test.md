# CancelConfirmationDialog 手動測試指南

## 測試目的
驗證取消確認對話框的功能、無障礙性和使用者體驗符合 Story 2.5 Task 2 的要求。

## 測試環境準備
1. 啟動前端開發伺服器: `npm run dev`
2. 啟動後端 API 服務
3. 開始一個批次摘要處理任務

## 測試案例

### 1. 基本對話框顯示功能
**測試步驟**：
1. 開始一個批次摘要處理
2. 點擊「取消」按鈕
3. 確認對話框正確顯示

**預期結果**：
- ✅ 對話框出現在畫面中央
- ✅ 背景遮罩正確顯示
- ✅ 警告圖示（ExclamationTriangleIcon）顯示
- ✅ 標題「確認取消處理」顯示
- ✅ 描述文字正確顯示完成進度資訊

### 2. 鍵盤快捷鍵測試
**測試步驟**：
1. 開啟取消對話框
2. 按 ESC 鍵
3. 確認對話框關閉

**預期結果**：
- ✅ ESC 鍵關閉對話框並繼續處理
- ✅ Tab 鍵可以在對話框元素間導航
- ✅ Enter 鍵可以觸發有焦點的按鈕
- ✅ 焦點不會跳出對話框範圍

### 3. 無障礙功能測試
**測試步驟**：
1. 使用螢幕閱讀器或開啟瀏覽器的無障礙檢查工具
2. 開啟取消對話框
3. 使用鍵盤導航

**預期結果**：
- ✅ ARIA 標籤正確設定 (role="dialog", aria-modal="true")
- ✅ 標題和描述正確關聯 (aria-labelledby, aria-describedby)
- ✅ 焦點正確設定在「繼續處理」按鈕上
- ✅ 螢幕閱讀器可以讀取所有重要資訊
- ✅ 關閉對話框時焦點恢復到觸發元素

### 4. 部分結果保存功能測試
**測試步驟**：
1. 開始批次處理並等待幾個分段完成
2. 點擊取消按鈕
3. 確認部分結果選項顯示
4. 測試勾選/取消勾選功能

**預期結果**：
- ✅ 有完成分段時顯示「保存已完成的部分結果」選項
- ✅ 顯示正確的完成進度資訊
- ✅ 勾選狀態正確反映在確認按鈕的說明中
- ✅ 沒有完成分段時不顯示保存選項

### 5. 對話框操作測試
**測試步驟**：
1. 開啟取消對話框
2. 測試「確認取消」按鈕
3. 開啟對話框
4. 測試「繼續處理」按鈕

**預期結果**：
- ✅ 「確認取消」觸發取消操作並關閉對話框
- ✅ 「繼續處理」關閉對話框但不取消處理
- ✅ 點擊背景不會意外關閉對話框（防誤操作）
- ✅ 按鈕有正確的視覺反饋（hover, focus）

### 6. 響應式設計測試
**測試步驟**：
1. 在不同螢幕尺寸下測試對話框
2. 測試行動裝置視窗
3. 確認佈局正確

**預期結果**：
- ✅ 對話框在小螢幕上正確縮放
- ✅ 按鈕在小螢幕上保持可點擊性
- ✅ 文字內容不會被截斷
- ✅ 邊距和間距在各種螢幕上都適當

### 7. 高對比度和偏好設定測試
**測試步驟**：
1. 啟用系統高對比度模式
2. 啟用減少動畫偏好
3. 測試對話框顯示

**預期結果**：
- ✅ 高對比度模式下文字清楚可讀
- ✅ 顏色對比符合 WCAG 標準
- ✅ 減少動畫模式下不顯示過渡效果
- ✅ 自定義焦點樣式正確顯示

## 整合測試

### 8. ProcessingProgressView 整合測試
**測試步驟**：
1. 在進度檢視中測試取消功能
2. 確認事件正確傳遞
3. 驗證狀態同步

**預期結果**：
- ✅ 取消按鈕正確觸發對話框
- ✅ 對話框事件正確傳遞到父元件
- ✅ 取消操作包含 savePartialResults 參數
- ✅ 對話框狀態與進度狀態同步

## 錯誤處理測試

### 9. 邊界條件測試
**測試步驟**：
1. 在沒有分段時測試取消
2. 在所有分段完成時測試取消
3. 在處理失敗時測試取消

**預期結果**：
- ✅ 各種處理狀態下對話框都正確顯示
- ✅ 進度資訊正確反映實際狀態
- ✅ 不會出現 JavaScript 錯誤

## 性能測試

### 10. 對話框性能測試
**測試步驟**：
1. 快速開啟/關閉對話框多次
2. 檢查記憶體使用情況
3. 確認沒有記憶體洩漏

**預期結果**：
- ✅ 對話框開啟/關閉流暢
- ✅ 沒有記憶體洩漏
- ✅ 焦點管理正確清理
- ✅ 事件監聽器正確清理

## 測試結果記錄

| 測試案例 | 狀態 | 備註 |
|---------|------|------|
| 1. 基本對話框顯示 | ⏳ 待測試 | |
| 2. 鍵盤快捷鍵 | ⏳ 待測試 | |
| 3. 無障礙功能 | ⏳ 待測試 | |
| 4. 部分結果保存 | ⏳ 待測試 | |
| 5. 對話框操作 | ⏳ 待測試 | |
| 6. 響應式設計 | ⏳ 待測試 | |
| 7. 高對比度偏好 | ⏳ 待測試 | |
| 8. ProcessingProgressView 整合 | ⏳ 待測試 | |
| 9. 邊界條件 | ⏳ 待測試 | |
| 10. 對話框性能 | ⏳ 待測試 | |

## 已知問題與限制

無

## 測試完成確認

所有測試案例通過後，Task 2: 取消確認對話框 可標記為完成。

---

**測試負責人**: Dev Agent (James)  
**測試日期**: 2025-08-25  
**版本**: Story 2.5 Task 2  
**狀態**: 實作完成，待手動測試驗證